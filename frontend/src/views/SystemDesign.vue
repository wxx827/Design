<template>
  <div class="system-design">
    <nav class="navbar">
      <div class="nav-brand">
        <router-link to="/">â† è¿”å›é¦–é¡µ</router-link>
      </div>
      <h1>ğŸ§© ç³»ç»Ÿè®¾è®¡è¯´æ˜</h1>
    </nav>

    <div class="content">
      <div class="page-header">
        <h2>ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡æ¨¡å¼</h2>
        <p>åŸºäºå¤šè®¾è®¡æ¨¡å¼èåˆçš„æ™ºèƒ½AIå†³ç­–ç³»ç»Ÿ</p>
      </div>

      <div class="design-container">
        <div class="design-card">
          <h3>ğŸ¯ ç³»ç»Ÿæ ¸å¿ƒæ€æƒ³</h3>
          <div class="core-concept">
            <p>
              æœ¬ç³»ç»Ÿé€šè¿‡<strong>ç­–ç•¥æ¨¡å¼</strong>å®ç°å¤šAIç®—æ³•çš„åŠ¨æ€åˆ‡æ¢ï¼Œ
              é€šè¿‡<strong>å·¥å‚æ¨¡å¼</strong>ç»Ÿä¸€æ¨¡å‹åˆ›å»ºï¼Œ
              é€šè¿‡<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>å®ç°å‰ç«¯æ•°æ®ä¸çŠ¶æ€çš„å®æ—¶æ›´æ–°ï¼Œ
              é€šè¿‡<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>è§„èŒƒAIå¤„ç†æµç¨‹ï¼Œ
              é€šè¿‡<strong>å•ä¾‹æ¨¡å¼</strong>ç®¡ç†å…¨å±€é…ç½®ï¼Œ
              æœ€ç»ˆæ„å»ºä¸€ä¸ª<strong>å¤šé¡µé¢ã€å¯äº¤äº’ã€å¯æ‰©å±•çš„æ™ºèƒ½ç³»ç»Ÿ</strong>ã€‚
            </p>
          </div>
        </div>

        <div class="design-card">
          <h3>ğŸ— ç³»ç»Ÿæ¶æ„</h3>
          <div class="architecture">
            <div class="arch-layer">
              <h4>å‰ç«¯å±‚ (Vue.js)</h4>
              <ul>
                <li>Dashboard - ç³»ç»Ÿé¦–é¡µ</li>
                <li>Task Center - ä»»åŠ¡é€‰æ‹©</li>
                <li>Strategy Lab - ç­–ç•¥å®éªŒå®¤</li>
                <li>AI Runtime - è¿è¡Œæ§åˆ¶å°</li>
                <li>Result Analysis - ç»“æœåˆ†æ</li>
                <li>System Design - è®¾è®¡è¯´æ˜</li>
              </ul>
            </div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">
              <h4>APIå±‚ (Flask RESTful)</h4>
              <ul>
                <li>GET /api/config - è·å–ç³»ç»Ÿé…ç½®</li>
                <li>POST /api/run - è¿è¡ŒAIæ¨¡å‹</li>
                <li>GET /api/results - è·å–ç»“æœ</li>
                <li>POST /api/results/compare - ç»“æœå¯¹æ¯”</li>
              </ul>
            </div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">
              <h4>è®¾è®¡æ¨¡å¼å±‚</h4>
              <ul>
                <li>å•ä¾‹æ¨¡å¼ - ç³»ç»Ÿé…ç½®ç®¡ç†</li>
                <li>ç­–ç•¥æ¨¡å¼ - AIç®—æ³•åˆ‡æ¢</li>
                <li>å·¥å‚æ¨¡å¼ - æ¨¡å‹åˆ›å»º</li>
                <li>æ¨¡æ¿æ–¹æ³• - ç»Ÿä¸€æµç¨‹</li>
                <li>è§‚å¯Ÿè€…æ¨¡å¼ - çŠ¶æ€é€šçŸ¥</li>
              </ul>
            </div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">
              <h4>AIæ¨¡å‹å±‚</h4>
              <ul>
                <li>æ•°æ®é¢„æµ‹æ¨¡å‹</li>
                <li>å›¾åƒåˆ†ç±»æ¨¡å‹</li>
                <li>æ™ºèƒ½æ¨èæ¨¡å‹</li>
                <li>å¼‚å¸¸æ£€æµ‹æ¨¡å‹</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="design-card">
          <h3>ğŸ§© è®¾è®¡æ¨¡å¼è¯¦è§£</h3>
          <div class="patterns-detail">
            <div class="pattern-item">
              <div class="pattern-header">
                <span class="pattern-badge">ç­–ç•¥æ¨¡å¼</span>
                <span class="pattern-role">æ ¸å¿ƒæ¨¡å¼</span>
              </div>
              <h4>Strategy Pattern</h4>
              <p><strong>ä½œç”¨ï¼š</strong>å®ç°å¤šç§AIç®—æ³•çš„åŠ¨æ€åˆ‡æ¢</p>
              <p><strong>å®ç°ï¼š</strong>å®šä¹‰AIStrategyæ¥å£ï¼Œ4ç§å…·ä½“ç­–ç•¥(Baseline, DeepLearning, Attention, Ensemble)</p>
              <p><strong>ä¼˜åŠ¿ï¼š</strong>ç®—æ³•ç‹¬ç«‹å°è£…ï¼Œå¯çµæ´»åˆ‡æ¢ï¼Œæ˜“äºæ‰©å±•æ–°ç­–ç•¥</p>
              <div class="code-block">
                <pre>class AIContext:
    def __init__(self, strategy_type):
        self._strategy = create_strategy(strategy_type)

    def execute_prediction(self, data):
        return self._strategy.predict(data)</pre>
              </div>
            </div>

            <div class="pattern-item">
              <div class="pattern-header">
                <span class="pattern-badge">å·¥å‚æ¨¡å¼</span>
                <span class="pattern-role">æ¨¡å‹åˆ›å»º</span>
              </div>
              <h4>Factory Pattern</h4>
              <p><strong>ä½œç”¨ï¼š</strong>æ ¹æ®ä»»åŠ¡ç±»å‹åˆ›å»ºå¯¹åº”çš„AIæ¨¡å‹</p>
              <p><strong>å®ç°ï¼š</strong>AIModelFactoryç»Ÿä¸€åˆ›å»º4ç§æ¨¡å‹å®ä¾‹</p>
              <p><strong>ä¼˜åŠ¿ï¼š</strong>è§£è€¦å¯¹è±¡åˆ›å»ºï¼Œæ”¯æŒå¤šæ€ï¼Œä¾¿äºç®¡ç†</p>
              <div class="code-block">
                <pre>class AIModelFactory:
    def create_model(self, task_type):
        models = {
            'prediction': PredictionModel,
            'classification': ClassificationModel
        }
        return models[task_type]()</pre>
              </div>
            </div>

            <div class="pattern-item">
              <div class="pattern-header">
                <span class="pattern-badge">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</span>
                <span class="pattern-role">æµç¨‹è§„èŒƒ</span>
              </div>
              <h4>Template Method Pattern</h4>
              <p><strong>ä½œç”¨ï¼š</strong>å®šä¹‰AIå¤„ç†çš„ç»Ÿä¸€æµç¨‹æ¡†æ¶</p>
              <p><strong>å®ç°ï¼š</strong>æŠ½è±¡ç±»AIModelå®šä¹‰executeæ¨¡æ¿æ–¹æ³•</p>
              <p><strong>æµç¨‹ï¼š</strong>æ•°æ®åŠ è½½ â†’ é¢„å¤„ç† â†’ æ¨ç† â†’ è¾“å‡ºç»“æœ</p>
              <div class="code-block">
                <pre>class AIModel(ABC):
    def execute(self, context):
        self.load_data()
        self.preprocess()
        result = self.inference(context)
        return self.output_result()</pre>
              </div>
            </div>

            <div class="pattern-item">
              <div class="pattern-header">
                <span class="pattern-badge">è§‚å¯Ÿè€…æ¨¡å¼</span>
                <span class="pattern-role">å®æ—¶æ›´æ–°</span>
              </div>
              <h4>Observer Pattern</h4>
              <p><strong>ä½œç”¨ï¼š</strong>AIç»“æœå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥è§‚å¯Ÿè€…æ›´æ–°</p>
              <p><strong>å®ç°ï¼š</strong>ResultSubjectç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œç»“æœæ›´æ–°æ—¶é€šçŸ¥</p>
              <p><strong>ä¼˜åŠ¿ï¼š</strong>å®ç°å‘å¸ƒ-è®¢é˜…ï¼Œå‰ç«¯å›¾è¡¨è‡ªåŠ¨åˆ·æ–°</p>
              <div class="code-block">
                <pre>class ResultSubject:
    def set_result(self, result):
        self._result = result
        self.notify()  # é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…

    def notify(self):
        for observer in self._observers:
            observer.update(self._result)</pre>
              </div>
            </div>

            <div class="pattern-item">
              <div class="pattern-header">
                <span class="pattern-badge">å•ä¾‹æ¨¡å¼</span>
                <span class="pattern-role">å…¨å±€é…ç½®</span>
              </div>
              <h4>Singleton Pattern</h4>
              <p><strong>ä½œç”¨ï¼š</strong>ç®¡ç†ç³»ç»Ÿå…¨å±€çŠ¶æ€å’Œé…ç½®</p>
              <p><strong>å®ç°ï¼š</strong>SystemConfigå•ä¾‹ç±»ï¼Œå­˜å‚¨å½“å‰ä»»åŠ¡å’Œç­–ç•¥</p>
              <p><strong>ä¼˜åŠ¿ï¼š</strong>å…¨å±€å”¯ä¸€å®ä¾‹ï¼ŒçŠ¶æ€ä¸€è‡´æ€§ä¿è¯</p>
              <div class="code-block">
                <pre>class SystemConfig:
    _instance = None

    @staticmethod
    def get_instance():
        if SystemConfig._instance is None:
            SystemConfig._instance = SystemConfig()
        return SystemConfig._instance</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="design-card">
          <h3>ğŸ”— é¡µé¢æµç¨‹å›¾</h3>
          <div class="flow-diagram">
            <div class="flow-node">Dashboard<br/>ç³»ç»Ÿé¦–é¡µ</div>
            <div class="flow-arrow">â†“</div>
            <div class="flow-node">Task Center<br/>é€‰æ‹©ä»»åŠ¡ç±»å‹</div>
            <div class="flow-arrow">â†“</div>
            <div class="flow-node">Strategy Lab<br/>é€‰æ‹©AIç­–ç•¥</div>
            <div class="flow-arrow">â†“</div>
            <div class="flow-node">AI Runtime<br/>è¿è¡Œæ¨¡å‹</div>
            <div class="flow-arrow">â†“</div>
            <div class="flow-node">Result Analysis<br/>ç»“æœåˆ†æ</div>
          </div>
        </div>

        <div class="design-card highlight-card">
          <h3>âœ¨ ç³»ç»Ÿäº®ç‚¹</h3>
          <div class="highlights-grid">
            <div class="highlight-item">
              <div class="highlight-icon">ğŸ¨</div>
              <h4>5ç§è®¾è®¡æ¨¡å¼èåˆ</h4>
              <p>ç­–ç•¥ã€å·¥å‚ã€æ¨¡æ¿æ–¹æ³•ã€è§‚å¯Ÿè€…ã€å•ä¾‹æ¨¡å¼ååŒå·¥ä½œ</p>
            </div>
            <div class="highlight-item">
              <div class="highlight-icon">ğŸ”„</div>
              <h4>å®Œæ•´çš„ç”¨æˆ·æµç¨‹</h4>
              <p>ä»ä»»åŠ¡é€‰æ‹©åˆ°ç»“æœåˆ†æçš„é—­ç¯ä½“éªŒ</p>
            </div>
            <div class="highlight-item">
              <div class="highlight-icon">ğŸ“Š</div>
              <h4>å¯è§†åŒ–æ•°æ®å±•ç¤º</h4>
              <p>Chart.jså›¾è¡¨åº“å®ç°å®æ—¶æ•°æ®å¯è§†åŒ–</p>
            </div>
            <div class="highlight-item">
              <div class="highlight-icon">ğŸš€</div>
              <h4>å‰åç«¯åˆ†ç¦»æ¶æ„</h4>
              <p>Vue.js + Flask RESTful APIè®¾è®¡</p>
            </div>
            <div class="highlight-item">
              <div class="highlight-icon">ğŸ”§</div>
              <h4>é«˜å¯æ‰©å±•æ€§</h4>
              <p>æ˜“äºæ·»åŠ æ–°ä»»åŠ¡ç±»å‹å’ŒAIç­–ç•¥</p>
            </div>
            <div class="highlight-item">
              <div class="highlight-icon">ğŸ’¡</div>
              <h4>å®æ—¶çŠ¶æ€ç®¡ç†</h4>
              <p>PiniaçŠ¶æ€ç®¡ç†ï¼Œå“åº”å¼æ›´æ–°</p>
            </div>
          </div>
        </div>

        <div class="design-card">
          <h3>ğŸ“ é€‚ç”¨è¯¾ç¨‹</h3>
          <ul class="course-list">
            <li>è½¯ä»¶è®¾è®¡æ¨¡å¼è¯¾ç¨‹è®¾è®¡</li>
            <li>è½¯ä»¶å·¥ç¨‹ç»¼åˆå®è·µ</li>
            <li>AIåº”ç”¨ç³»ç»Ÿè®¾è®¡</li>
            <li>å‰ç«¯ä¸åç«¯ç»¼åˆå¼€å‘</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
</script>

<style scoped>
.system-design {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding-bottom: 3rem;
}

.navbar {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  padding: 1.5rem 3rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.nav-brand a {
  color: white;
  text-decoration: none;
  font-weight: 600;
}

.navbar h1 {
  color: white;
  font-size: 1.5rem;
}

.content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 3rem 2rem;
}

.page-header {
  text-align: center;
  color: white;
  margin-bottom: 3rem;
}

.page-header h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.page-header p {
  opacity: 0.9;
  font-size: 1.1rem;
}

.design-container {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.design-card {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.design-card h3 {
  color: #333;
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  border-bottom: 3px solid #667eea;
  padding-bottom: 0.5rem;
}

.core-concept p {
  color: #666;
  line-height: 1.8;
  font-size: 1.05rem;
}

.core-concept strong {
  color: #667eea;
  font-weight: 600;
}

.architecture {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.arch-layer {
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 12px;
  border-left: 4px solid #667eea;
}

.arch-layer h4 {
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.arch-layer ul {
  list-style: none;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.5rem;
}

.arch-layer li {
  color: #666;
  padding: 0.5rem;
  background: white;
  border-radius: 6px;
  font-size: 0.95rem;
}

.arch-arrow {
  text-align: center;
  font-size: 2rem;
  color: #667eea;
  font-weight: bold;
}

.patterns-detail {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.pattern-item {
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 12px;
  border-left: 4px solid #667eea;
}

.pattern-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.pattern-badge {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.95rem;
}

.pattern-role {
  background: #10b981;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 6px;
  font-size: 0.875rem;
}

.pattern-item h4 {
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.2rem;
}

.pattern-item p {
  color: #666;
  margin: 0.5rem 0;
  line-height: 1.6;
}

.pattern-item strong {
  color: #333;
}

.code-block {
  background: #282c34;
  color: #abb2bf;
  padding: 1rem;
  border-radius: 8px;
  margin-top: 1rem;
  overflow-x: auto;
}

.code-block pre {
  margin: 0;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 0.9rem;
  line-height: 1.5;
}

.flow-diagram {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  padding: 2rem;
}

.flow-node {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1.5rem 3rem;
  border-radius: 12px;
  font-weight: 600;
  text-align: center;
  min-width: 250px;
  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}

.flow-arrow {
  font-size: 2rem;
  color: #667eea;
  font-weight: bold;
}

.highlight-card {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  border: 2px solid #667eea;
}

.highlights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.highlight-item {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  text-align: center;
}

.highlight-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.highlight-item h4 {
  color: #333;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.highlight-item p {
  color: #666;
  font-size: 0.95rem;
  line-height: 1.6;
}

.course-list {
  list-style: none;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

.course-list li {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  color: #666;
  border-left: 4px solid #667eea;
  font-weight: 500;
}
</style>
